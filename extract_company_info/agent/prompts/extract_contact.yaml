_type: prompt
input_variables:
  - web_context
  - chunk_info
template: |
  Webコンテキストを元に、会社情報を抽出してください。
  - 出力は与えられたJSONスキーマに従ってください。
  - 住所は「都/道/府/県」を含む完全な住所を抽出してください（例：「京都府京都市左京区...」のように都道府県名を含める）。
  - **注意**: 業種（business）と事業内容（genre）は入力データから自動的に設定されるため、抽出する必要はありません。
    ただし、JSONスキーマに含まれているため、空文字列または任意の値を設定してください（後で上書きされます）。
  
  # マルチツール機能の活用
  - **read_next_chunk**関数を使用して、現在のテキストチャンクに情報が見当たらない場合、次のチャンクを読み込んでください。
    - 会社概要やお問い合わせ情報が出てくるまで積極的に読み進めてください。
    - 情報が十分に見つかったら、**report_company_info**を呼び出して終了してください。
  - **crawl_footer_links**関数を使用して、フッター内の会社概要・お問い合わせページなどを取得し、必要情報を補完してください。
    追加で本文が必要な場合は **crawl_website** 関数も併用して構いません。
  - **validate_company_info**関数を使用して、抽出した会社情報の各フィールドを検証してください。
    検証結果に基づいて、エラーがあれば修正案を参照して自動修正を試行してください。
    特に以下の点に注意してください:
    - 会社名: 「株式会社」「有限会社」などを含み、支店・営業所・括弧・スペースを含まないこと
    - 電話番号: 半角数字とハイフンのみ、ハイフンを含むこと
    - 住所: 「都」「道」「府」「県」のいずれかを含むこと
    - 業種・事業内容: 入力データから自動設定されるため、検証不要

  # Webコンテキスト
  ---
  {chunk_info}
  ---
  {web_context}


